# Super Editor v2 - ê°œë°œ ì‘ì—… ëª©ë¡

> ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-12-14

## âœ… ì™„ë£Œëœ ì‘ì—…

### Phase 1: ì¸í”„ë¼
- [x] ìŠ¤í‚¤ë§ˆ íƒ€ì… ì •ì˜ (`schema/types.ts`)
- [x] DB ìŠ¤í‚¤ë§ˆ ì •ì˜ (`schema/db-schema.ts`)
- [x] ì„œë²„ ì•¡ì…˜ - Document CRUD (`actions/document.ts`)
- [x] ì„œë²„ ì•¡ì…˜ - AI Edit (`actions/ai-edit.ts`)
- [x] AI API ë¼ìš°íŠ¸ (`api/super-editor-v2/ai/route.ts`)
- [x] DB ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±

### Phase 2: í”„ë¦¬ì…‹ ì •ì˜
- [x] í…Œë§ˆ í”„ë¦¬ì…‹ 13ê°œ (`presets/theme-presets.ts`)
- [x] íƒ€ì´í¬ê·¸ë˜í”¼ í”„ë¦¬ì…‹ 12ê°œ (`presets/typography-presets.ts`)
- [x] ì• ë‹ˆë©”ì´ì…˜ í”„ë¦¬ì…‹ 29ê°œ (`presets/animation-presets.ts`)

### Phase 3: ë Œë”ëŸ¬ ì‹œìŠ¤í…œ
- [x] Context Providers (`document-context`, `animation-context`, `block-context`) âœ…
- [x] ë³€ìˆ˜ ë°”ì¸ë”© (`binding-resolver`, `interpolate`, computed fields í†µí•©) âœ…
- [x] Style Resolver (`style-resolver` - CSS Variables, Token í•´ì„ í†µí•©) âœ…
- [x] Block/Element Renderer (`document`, `block`, `element`, `floating`) âœ…
- [x] Element Components (8ê°œ: text, image, shape, button, icon, divider, map, calendar) âœ…

### Phase 4: ì• ë‹ˆë©”ì´ì…˜ ëŸ°íƒ€ì„
- [x] `animation/animation-runtime.ts` - GSAP + Lenis ê¸°ë°˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ âœ…
- [x] `animation/trigger-handler.ts` - íŠ¸ë¦¬ê±° ê°ì§€ ë° ì²˜ë¦¬ (scroll, gesture, event, time, state) âœ…
- [x] `animation/action-executor.ts` - ë¸”ë¡/ìš”ì†Œ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ í›… âœ…
- [x] `animation/state-machine.ts` - ìƒíƒœ ë¨¸ì‹  êµ¬í˜„ (ê²€ì¦, í”„ë¦¬ë¹ŒíŠ¸ ë¨¸ì‹  í¬í•¨) âœ…
- [x] `animation/scroll-manager.ts` - ScrollTrigger, ìˆ˜í‰ ìŠ¤í¬ë¡¤, íŒ¨ëŸ´ë™ìŠ¤ ê´€ë¦¬ âœ…

### Phase 4.5: AI ì‚¬ìš© ë‚´ì—­ ì¶”ì 
- [x] `schema/db-schema.ts` - `ai_edit_logs_v2` í…Œì´ë¸” ì¶”ê°€ âœ…
  - documentId, userId, prompt, targetBlockId, context
  - patches, explanation, success, errorMessage
  - snapshotId (ì „/í›„ ìƒíƒœ ì°¸ì¡°ìš©, editorSnapshotsV2 ì—°ê²°)
- [x] `api/super-editor-v2/ai/route.ts` - AI í˜¸ì¶œ ì‹œ ë¡œê¹… ì¶”ê°€ âœ…
- [ ] í’ˆì§ˆ ë¶„ì„: ìŠ¤ëƒ…ìƒ· ë¹„êµ ì¿¼ë¦¬ (AI í¸ì§‘ í›„ ìˆ˜ë™ ìˆ˜ì • ì—¬ë¶€ ë¶„ì„)

---

## ğŸ”² ì§„í–‰ ì¤‘ / ì˜ˆì •ëœ ì‘ì—…

### Phase 5: ì—ë””í„° UI

#### 5.1 ë ˆì´ì•„ì›ƒ
- [x] `components/editor/editor-layout.tsx` - 2íŒ¨ë„ ë ˆì´ì•„ì›ƒ âœ…
- [x] `components/editor/preview-panel.tsx` - í”„ë¦¬ë·° íŒ¨ë„ âœ…
- [x] `components/editor/editor-panel.tsx` - í¸ì§‘ íŒ¨ë„ âœ…

#### 5.2 íƒ­ êµ¬ì¡°
- [x] `components/editor/tabs/content-tab.tsx` - ì½˜í…ì¸  íƒ­ (Section-First) âœ…
- [x] `components/editor/tabs/design-tab.tsx` - ë””ìì¸ íƒ­ (3-Level ìŠ¤íƒ€ì¼) âœ…
- [x] `components/editor/tabs/share-tab.tsx` - ê³µìœ  íƒ­ âœ…

#### 5.3 ë³€ìˆ˜ ì—ë””í„°
- [x] `components/editor/fields/text-field.tsx` âœ…
- [x] `components/editor/fields/date-field.tsx` âœ…
- [x] `components/editor/fields/time-field.tsx` âœ…
- [x] `components/editor/fields/phone-field.tsx` âœ…
- [x] `components/editor/fields/account-field.tsx` âœ…
- [x] `components/editor/fields/image-field.tsx` âœ…
- [x] `components/editor/fields/gallery-field.tsx` âœ…
- [x] `components/editor/fields/address-field.tsx` âœ…

#### 5.4 ì§ì ‘ í¸ì§‘
- [ ] `components/editor/direct/draggable-element.tsx` - ë“œë˜ê·¸ ê°€ëŠ¥ ìš”ì†Œ
- [ ] `components/editor/direct/resize-handles.tsx` - ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤
- [ ] `components/editor/direct/context-menu.tsx` - ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´

#### 5.5 AI í”„ë¡¬í”„íŠ¸
- [ ] `components/editor/ai/prompt-input.tsx` - AI í”„ë¡¬í”„íŠ¸ ì…ë ¥
- [ ] `components/editor/ai/block-selector.tsx` - ë¸”ë¡ ì„ íƒê¸°
- [ ] `hooks/useAIEdit.ts` - AI í¸ì§‘ í›…

---

### Phase 6: ë¹Œë“œ & ë°°í¬

- [ ] `builder/html-builder.ts` - EditorDocument â†’ ì •ì  HTML
- [ ] `builder/css-builder.ts` - ìŠ¤íƒ€ì¼ ë¹Œë“œ
- [ ] `builder/js-builder.ts` - ëŸ°íƒ€ì„ JS ë¹Œë“œ
- [ ] `builder/asset-optimizer.ts` - ì´ë¯¸ì§€ ìµœì í™”
- [ ] `actions/publish.ts` - S3/CDN ë°°í¬ ì•¡ì…˜

---

### Phase 7: v1 â†’ v2 ë§ˆì´ê·¸ë ˆì´ì…˜

- [ ] `migration/v1-to-v2-converter.ts` - LayoutSchema â†’ EditorDocument ë³€í™˜
- [ ] `migration/data-migrator.ts` - ê¸°ì¡´ ì²­ì²©ì¥ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] `migration/validation.ts` - ë³€í™˜ ê²°ê³¼ ê²€ì¦

---

## íŒŒì¼ êµ¬ì¡° (ì˜ˆì •)

```
src/lib/super-editor-v2/
â”œâ”€â”€ schema/
â”‚   â”œâ”€â”€ types.ts              âœ…
â”‚   â”œâ”€â”€ db-schema.ts          âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ presets/
â”‚   â”œâ”€â”€ theme-presets.ts      âœ…
â”‚   â”œâ”€â”€ typography-presets.ts âœ…
â”‚   â”œâ”€â”€ animation-presets.ts  âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ document.ts           âœ…
â”‚   â”œâ”€â”€ ai-edit.ts            âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ context/
â”‚   â”œâ”€â”€ document-context.tsx  âœ…
â”‚   â”œâ”€â”€ animation-context.tsx âœ…
â”‚   â”œâ”€â”€ block-context.tsx     âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ binding-resolver.ts   âœ… (computed-fields í†µí•©)
â”‚   â””â”€â”€ interpolate.ts        âœ…
â”œâ”€â”€ renderer/
â”‚   â”œâ”€â”€ style-resolver.ts     âœ…
â”‚   â”œâ”€â”€ document-renderer.tsx âœ…
â”‚   â”œâ”€â”€ block-renderer.tsx    âœ…
â”‚   â”œâ”€â”€ element-renderer.tsx  âœ…
â”‚   â”œâ”€â”€ floating-renderer.tsx âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ animation/
â”‚   â”œâ”€â”€ animation-runtime.ts  âœ…
â”‚   â”œâ”€â”€ trigger-handler.ts    âœ…
â”‚   â”œâ”€â”€ action-executor.ts    âœ…
â”‚   â”œâ”€â”€ state-machine.ts      âœ…
â”‚   â”œâ”€â”€ scroll-manager.ts     âœ…
â”‚   â””â”€â”€ index.ts              âœ…
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ elements/
â”‚   â”‚   â”œâ”€â”€ text-element.tsx     âœ…
â”‚   â”‚   â”œâ”€â”€ image-element.tsx    âœ…
â”‚   â”‚   â”œâ”€â”€ shape-element.tsx    âœ…
â”‚   â”‚   â”œâ”€â”€ button-element.tsx   âœ…
â”‚   â”‚   â”œâ”€â”€ icon-element.tsx     âœ…
â”‚   â”‚   â”œâ”€â”€ divider-element.tsx  âœ…
â”‚   â”‚   â”œâ”€â”€ map-element.tsx      âœ…
â”‚   â”‚   â”œâ”€â”€ calendar-element.tsx âœ…
â”‚   â”‚   â””â”€â”€ index.ts             âœ…
â”‚   â””â”€â”€ editor/
â”‚       â”œâ”€â”€ editor-layout.tsx    âœ…
â”‚       â”œâ”€â”€ preview-panel.tsx    âœ…
â”‚       â”œâ”€â”€ editor-panel.tsx     âœ…
â”‚       â”œâ”€â”€ index.ts             âœ…
â”‚       â”œâ”€â”€ tabs/
â”‚       â”‚   â”œâ”€â”€ content-tab.tsx  âœ…
â”‚       â”‚   â”œâ”€â”€ design-tab.tsx   âœ…
â”‚       â”‚   â”œâ”€â”€ share-tab.tsx    âœ…
â”‚       â”‚   â””â”€â”€ index.ts         âœ…
â”‚       â”œâ”€â”€ fields/
â”‚       â”‚   â”œâ”€â”€ text-field.tsx     âœ…
â”‚       â”‚   â”œâ”€â”€ date-field.tsx     âœ…
â”‚       â”‚   â”œâ”€â”€ time-field.tsx     âœ…
â”‚       â”‚   â”œâ”€â”€ phone-field.tsx    âœ…
â”‚       â”‚   â”œâ”€â”€ account-field.tsx  âœ…
â”‚       â”‚   â”œâ”€â”€ image-field.tsx    âœ…
â”‚       â”‚   â”œâ”€â”€ gallery-field.tsx  âœ…
â”‚       â”‚   â”œâ”€â”€ address-field.tsx  âœ…
â”‚       â”‚   â””â”€â”€ index.ts           âœ…
â”‚       â”œâ”€â”€ direct/
â”‚       â””â”€â”€ ai/
â”œâ”€â”€ builder/
â”‚   â”œâ”€â”€ html-builder.ts
â”‚   â”œâ”€â”€ css-builder.ts
â”‚   â””â”€â”€ asset-optimizer.ts
â”œâ”€â”€ migration/
â”‚   â”œâ”€â”€ v1-to-v2-converter.ts
â”‚   â””â”€â”€ data-migrator.ts
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useAIEdit.ts
â””â”€â”€ index.ts                  âœ…
```

---

## ê¶Œì¥ ì§„í–‰ ìˆœì„œ

1. **Context ì™„ì„±** â†’ document, animation, block context
2. **ë³€ìˆ˜ ë°”ì¸ë”©** â†’ resolveBinding, interpolate
3. **Style Resolver** â†’ StyleSystem â†’ CSS ë³€í™˜
4. **Renderer êµ¬í˜„** â†’ Document â†’ Block â†’ Element
5. **Element ì»´í¬ë„ŒíŠ¸** â†’ 8ê°œ ìš”ì†Œ íƒ€ì…
6. **ì• ë‹ˆë©”ì´ì…˜ ëŸ°íƒ€ì„** â†’ GSAP í†µí•©
7. **ì—ë””í„° UI** â†’ 2íŒ¨ë„, íƒ­, í•„ë“œ
8. **ë¹Œë“œ ì‹œìŠ¤í…œ** â†’ HTML/CSS/JS ë¹Œë“œ
9. **ë§ˆì´ê·¸ë ˆì´ì…˜** â†’ v1 â†’ v2 ë³€í™˜

---

## ë‹¤ìŒ ì„¸ì…˜ ì‹œì‘ì 

Phase 5.1, 5.2, 5.3 ì™„ë£Œë¨. ë‹¤ìŒ ì‘ì—…:

1. Phase 5.4 ì§ì ‘ í¸ì§‘ ì§„í–‰
   - `components/editor/direct/draggable-element.tsx` - ë“œë˜ê·¸ ê°€ëŠ¥ ìš”ì†Œ
   - `components/editor/direct/resize-handles.tsx` - ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤
   - `components/editor/direct/context-menu.tsx` - ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
2. ë˜ëŠ” Phase 5.5 AI í”„ë¡¬í”„íŠ¸ ì§„í–‰
3. ë˜ëŠ” Phase 6 ë¹Œë“œ ì‹œìŠ¤í…œ ë¨¼ì € ì§„í–‰ ê°€ëŠ¥
