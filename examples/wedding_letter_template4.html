<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì§€ìœ¤ & ê¸¸ë™ ê²°í˜¼í•©ë‹ˆë‹¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        /* ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ ì±„íŒ… ë°°ê²½ */
        .chat-bg {
            background: linear-gradient(180deg, #9BBBD4 0%, #7BA3C7 100%);
        }

        /* ì¸í„°ë·°ì–´ ë©”ì‹œì§€ (ì™¼ìª½, í°ìƒ‰) */
        .bubble-interviewer {
            background: #FFFFFF;
            color: #1F2937;
            border-radius: 4px 18px 18px 18px;
            padding: 12px 16px;
            max-width: 80%;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
            font-size: 14px;
            line-height: 1.6;
        }

        /* ì»¤í”Œ ë‹µë³€ (ì˜¤ë¥¸ìª½, ë…¸ë‘) */
        .bubble-couple {
            background: #FEE500;
            color: #3C1E1E;
            border-radius: 18px 4px 18px 18px;
            padding: 12px 16px;
            max-width: 80%;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            font-size: 14px;
            line-height: 1.6;
        }

        /* ë‹µë³€ì ì´ë¦„ íƒœê·¸ */
        .answer-tag {
            display: inline-block;
            font-size: 11px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
            margin-bottom: 6px;
        }

        .tag-groom {
            background: rgba(59, 130, 246, 0.15);
            color: #2563EB;
        }

        .tag-bride {
            background: rgba(236, 72, 153, 0.15);
            color: #DB2777;
        }

        .tag-both {
            background: rgba(168, 85, 247, 0.15);
            color: #9333EA;
        }

        /* ì´ë¯¸ì§€ ë²„ë¸” */
        .bubble-image {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* í”„ë¡œí•„ ì‚¬ì§„ */
        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* ë‚ ì§œ/ì„¹ì…˜ êµ¬ë¶„ */
        .section-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }

        .section-divider span {
            background: rgba(255, 255, 255, 0.9);
            color: #4B5563;
            font-size: 12px;
            font-weight: 500;
            padding: 8px 20px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* ì‹œìŠ¤í…œ ë©”ì‹œì§€ */
        .system-announcement {
            text-align: center;
            padding: 30px 16px;
        }

        .announcement-card {
            display: inline-block;
            background: linear-gradient(135deg, #FEE500 0%, #FFD700 100%);
            color: #3C1E1E;
            font-weight: 700;
            font-size: 18px;
            padding: 20px 40px;
            border-radius: 30px;
            box-shadow: 0 6px 20px rgba(254, 229, 0, 0.4);
        }

        /* íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° */
        .typing-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 14px 18px;
            background: #FEE500;
            border-radius: 18px 4px 18px 18px;
        }

        .typing-dot {
            width: 7px;
            height: 7px;
            background: #3C1E1E;
            border-radius: 50%;
            opacity: 0.4;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-8px);
                opacity: 1;
            }
        }

        /* ë©”ì‹œì§€ ì• ë‹ˆë©”ì´ì…˜ */
        .message-hidden {
            opacity: 0;
            transform: translateY(15px);
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-left {
            animation: slideLeft 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes slideLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-right {
            animation: slideRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes slideRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .scale-in {
            animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* ì±„íŒ… ì»¨í…Œì´ë„ˆ */
        .chat-container {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        /* í•˜ë‹¨ ì…ë ¥ì°½ */
        .input-area {
            background: #FFFFFF;
            border-top: 1px solid #E5E7EB;
        }

        /* ì±„íŒ… í—¤ë” */
        .chat-header {
            background: #FFFFFF;
            border-bottom: 1px solid #E5E7EB;
        }

        /* ì›¨ë”© ì •ë³´ ì¹´ë“œ */
        .info-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @media (prefers-reduced-motion: reduce) {
            .fade-in, .slide-left, .slide-right, .scale-in {
                animation: none;
                opacity: 1;
                transform: none;
            }
            .typing-dot {
                animation: none;
            }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kakao-yellow': '#FEE500',
                        'kakao-brown': '#3C1E1E',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900">
    <!-- ëª¨ë°”ì¼ ì»¨í…Œì´ë„ˆ -->
    <div class="mx-auto relative" style="max-width: 375px; min-height: 100vh;">

        <!-- ì±„íŒ… í—¤ë” -->
        <header class="chat-header sticky top-0 z-50">
            <div class="flex items-center justify-center px-4 py-3">
                <div class="text-center">
                    <p class="font-semibold text-gray-800">ğŸ’’ Wedding Interview</p>
                    <p class="text-xs text-gray-500">ì§€ìœ¤ & ê¸¸ë™</p>
                </div>
            </div>
        </header>

        <!-- ì±„íŒ… ì˜ì—­ -->
        <main class="chat-container chat-bg min-h-screen pb-24 pt-4" id="chat-area">
            <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
        </main>

        <!-- í•˜ë‹¨ ì…ë ¥ì°½ (ì¥ì‹ìš©) -->
        <footer class="input-area fixed bottom-0 left-0 right-0 max-w-[375px] mx-auto p-3">
            <div class="flex items-center justify-center">
                <p class="text-sm text-gray-400">ìŠ¤í¬ë¡¤í•˜ì—¬ ì¸í„°ë·° ì‹œì‘í•˜ê¸° â†“</p>
            </div>
        </footer>

    </div>

    <script>
        // ì¸í„°ë·° ë©”ì‹œì§€ ë°ì´í„°
        const messageQueue = [
            // ì¸íŠ¸ë¡œ
            { type: 'section', content: 'ğŸ¤ ì›¨ë”© ì¸í„°ë·°' },
            { type: 'interviewer', text: 'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ê²°í˜¼ì„ ì•ë‘” ë‘ ë¶„ì„ ë§Œë‚˜ë´¤ìŠµë‹ˆë‹¤ â˜ºï¸' },
            { type: 'typing' },

            // ì²« ë§Œë‚¨
            { type: 'interviewer', text: 'ë‘ ë¶„ì€ ì–´ë–»ê²Œ ì²˜ìŒ ë§Œë‚˜ê²Œ ë˜ì…¨ë‚˜ìš”?' },
            { type: 'typing' },
            { type: 'answer', speaker: 'groom', name: 'ê¸¸ë™', text: 'ì¹œêµ¬ ì†Œê°œë¡œ ë§Œë‚¬ì–´ìš”. 2019ë…„ ë´„ì´ì—ˆì£  ğŸŒ¸' },
            { type: 'typing' },
            { type: 'answer', speaker: 'bride', name: 'ì§€ìœ¤', text: 'ì²«ì¸ìƒì´ ì¢€ ì°¨ê°€ì›Œ ë³´ì˜€ëŠ”ë°... ì•Œê³  ë³´ë‹ˆ ì—„ì²­ ê¸´ì¥í•œ ê±°ì˜€ëŒ€ìš” ã…‹ã…‹' },
            { type: 'typing' },
            { type: 'answer', speaker: 'groom', name: 'ê¸¸ë™', text: 'ë„ˆë¬´ ì˜ˆë»ì„œ ë§ì´ ì•ˆ ë‚˜ì™”ì–´ìš” ğŸ˜…' },

            // ì—°ì•  ì—í”¼ì†Œë“œ
            { type: 'section', content: 'ğŸ’• ì—°ì•  ì‹œì ˆ' },
            { type: 'interviewer', text: 'ì—°ì• í•˜ë©´ì„œ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì´ ìˆë‹¤ë©´ìš”?' },
            { type: 'typing' },
            { type: 'answer', speaker: 'bride', name: 'ì§€ìœ¤', text: 'ì œì£¼ë„ ì²« ì—¬í–‰ì´ìš”! ë¹„ê°€ ì—„ì²­ ì™”ëŠ”ë°...' },
            { type: 'typing' },
            { type: 'answer', speaker: 'groom', name: 'ê¸¸ë™', text: 'í˜¸í…”ì—ì„œ ë¼ë©´ ë“ì—¬ë¨¹ìœ¼ë©´ì„œ ì˜í™” ë´¤ì–´ìš” ğŸœ' },
            { type: 'typing' },
            { type: 'answer', speaker: 'both', name: 'ë‘˜ì´ í•¨ê»˜', text: 'ì§€ê¸ˆë„ ë¹„ ì˜¤ë©´ ê·¸ë•Œ ìƒê°ë‚˜ìš” â˜”' },
            { type: 'image', src: 'images/jiyoon.png', alt: 'ì»¤í”Œ ì‚¬ì§„' },

            // í”„ë¡œí¬ì¦ˆ
            { type: 'section', content: 'ğŸ’ í”„ë¡œí¬ì¦ˆ' },
            { type: 'interviewer', text: 'í”„ë¡œí¬ì¦ˆëŠ” ì–´ë–»ê²Œ í•˜ì…¨ì–´ìš”?' },
            { type: 'typing' },
            { type: 'answer', speaker: 'groom', name: 'ê¸¸ë™', text: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì— ì¤€ë¹„í–ˆì–´ìš”. ë„ˆë¬´ ë–¨ë ¸ì£ ...' },
            { type: 'typing' },
            { type: 'answer', speaker: 'groom', name: 'ê¸¸ë™', text: '"ì§€ìœ¤ì•„, ë‚˜ë‘ ê²°í˜¼í•´ì¤„ë˜?" ğŸ’' },
            { type: 'typing' },
            { type: 'answer', speaker: 'bride', name: 'ì§€ìœ¤', text: 'ë‹¹ì—°íˆ "ì‘!!!" í–ˆì£  ğŸ¥¹ğŸ’•' },

            // ê²°í˜¼ ë°œí‘œ
            { type: 'system', content: 'ğŸ’’ ì €í¬ ê²°í˜¼í•©ë‹ˆë‹¤' },

            { type: 'interviewer', text: 'ê²°í˜¼ì‹ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”!' },
            { type: 'typing' },
            { type: 'info', data: {
                date: '2025ë…„ 11ì›” 30ì¼',
                day: 'ì¼ìš”ì¼',
                time: 'ì˜¤ì „ 11ì‹œ 30ë¶„',
                venue: 'ì²­ë‹´ ë”ì±„í”Œ',
                address: 'ì„œìš¸ ê°•ë‚¨êµ¬ ì²­ë‹´ë™'
            }},

            // ë§ˆë¬´ë¦¬
            { type: 'section', content: 'ğŸ™ ë§ˆì§€ë§‰ ì¸ì‚¬' },
            { type: 'interviewer', text: 'ë§ˆì§€ë§‰ìœ¼ë¡œ í•˜ê³  ì‹¶ì€ ë§ì”€ì´ ìˆìœ¼ì‹ ê°€ìš”?' },
            { type: 'typing' },
            { type: 'answer', speaker: 'both', name: 'ì§€ìœ¤ & ê¸¸ë™', text: 'ì €í¬ì˜ ìƒˆë¡œìš´ ì‹œì‘ì„ í•¨ê»˜ ì¶•ë³µí•´ì£¼ì„¸ìš”.\nì†Œì¤‘í•œ ë¶„ë“¤ì„ ëª¨ì‹œê³  ì‚¬ë‘ì˜ ê²°ì‹¤ì„ ë§ºìœ¼ë ¤ í•©ë‹ˆë‹¤. ğŸ’•' },

            { type: 'image', src: 'images/jiyoon.png', alt: 'ì›¨ë”© ì‚¬ì§„', large: true },

            { type: 'interviewer', text: 'ë‘ ë¶„ì˜ ì•ë‚ ì„ ì¶•ë³µí•©ë‹ˆë‹¤! ğŸŠ\ní–‰ë³µí•˜ì„¸ìš”~ ğŸ’’' },
        ];

        class ChatController {
            constructor() {
                this.chatArea = document.getElementById('chat-area');
                this.currentIndex = 0;
                this.isPlaying = false;
                this.hasStarted = false;
                this.typingDuration = 800;
                this.messageDelay = 600;

                this.init();
            }

            init() {
                // ì²« ë©”ì‹œì§€ë“¤ í‘œì‹œ
                this.showInitialMessages();
                // ì‹œì‘ íŠ¸ë¦¬ê±° ì„¤ì •
                this.setupTrigger();
            }

            showInitialMessages() {
                // ì„¹ì…˜ íƒ€ì´í‹€
                if (messageQueue[0]) {
                    const el = this.createMessageElement(messageQueue[0]);
                    this.chatArea.appendChild(el);
                    this.currentIndex++;
                }
                // ì²« ì¸í„°ë·°ì–´ ë©˜íŠ¸
                if (messageQueue[1]) {
                    const el = this.createMessageElement(messageQueue[1]);
                    this.chatArea.appendChild(el);
                    requestAnimationFrame(() => {
                        el.querySelector('.bubble-interviewer')?.classList.add('slide-left');
                    });
                    this.currentIndex++;
                }
            }

            setupTrigger() {
                const footer = document.querySelector('footer');

                const startPlay = () => {
                    if (!this.hasStarted) {
                        this.hasStarted = true;
                        footer.innerHTML = '<div class="flex items-center justify-center"><p class="text-sm text-gray-400">ì¸í„°ë·° ì§„í–‰ ì¤‘...</p></div>';
                        this.startAutoPlay();
                    }
                };

                // ìŠ¤í¬ë¡¤, í„°ì¹˜, í´ë¦­ìœ¼ë¡œ ì‹œì‘
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 5) startPlay();
                }, { once: true });

                document.addEventListener('touchstart', startPlay, { once: true });
                document.addEventListener('click', startPlay, { once: true });

                // 4ì´ˆ í›„ ìë™ ì‹œì‘
                setTimeout(startPlay, 4000);
            }

            startAutoPlay() {
                if (this.isPlaying) return;
                this.isPlaying = true;
                this.playNext();
            }

            playNext() {
                if (this.currentIndex >= messageQueue.length) {
                    this.isPlaying = false;
                    document.querySelector('footer').innerHTML = '<div class="flex items-center justify-center"><p class="text-sm text-gray-400">ğŸ’• ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ’•</p></div>';
                    return;
                }

                const msg = messageQueue[this.currentIndex];

                if (msg.type === 'typing') {
                    this.showTyping();
                } else {
                    this.showMessage(msg);
                }
            }

            showTyping() {
                const div = document.createElement('div');
                div.className = 'px-4 py-2 flex justify-end';
                div.innerHTML = `
                    <div class="typing-indicator">
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                    </div>
                `;
                this.chatArea.appendChild(div);
                this.scrollToBottom();

                setTimeout(() => {
                    div.remove();
                    this.currentIndex++;
                    this.playNext();
                }, this.typingDuration);
            }

            showMessage(msg) {
                const el = this.createMessageElement(msg);
                this.chatArea.appendChild(el);

                // ì• ë‹ˆë©”ì´ì…˜ ì ìš©
                requestAnimationFrame(() => {
                    if (msg.type === 'interviewer') {
                        el.querySelector('.bubble-interviewer')?.classList.add('slide-left');
                    } else if (msg.type === 'answer') {
                        el.querySelector('.bubble-couple')?.classList.add('slide-right');
                    } else if (msg.type === 'system') {
                        el.querySelector('.announcement-card')?.classList.add('scale-in');
                    } else if (msg.type === 'info') {
                        el.querySelector('.info-card')?.classList.add('scale-in');
                    } else if (msg.type === 'image') {
                        el.querySelector('.bubble-image')?.classList.add('scale-in');
                    } else if (msg.type === 'section') {
                        el.querySelector('.section-divider span')?.classList.add('fade-in');
                    }
                });

                this.scrollToBottom();
                this.currentIndex++;

                setTimeout(() => this.playNext(), this.messageDelay);
            }

            createMessageElement(msg) {
                const div = document.createElement('div');

                switch (msg.type) {
                    case 'section':
                        div.className = 'section-divider';
                        div.innerHTML = `<span class="message-hidden">${msg.content}</span>`;
                        break;

                    case 'system':
                        div.className = 'system-announcement';
                        div.innerHTML = `<div class="announcement-card message-hidden">${msg.content}</div>`;
                        break;

                    case 'interviewer':
                        div.className = 'px-4 py-2';
                        div.innerHTML = `
                            <div class="flex gap-3 items-start">
                                <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-lg shadow-md flex-shrink-0">ğŸ¤</div>
                                <div class="bubble-interviewer message-hidden">
                                    ${msg.text.replace(/\n/g, '<br>')}
                                </div>
                            </div>
                        `;
                        break;

                    case 'answer':
                        const tagClass = msg.speaker === 'groom' ? 'tag-groom' :
                                        msg.speaker === 'bride' ? 'tag-bride' : 'tag-both';
                        div.className = 'px-4 py-2';
                        div.innerHTML = `
                            <div class="flex justify-end">
                                <div class="bubble-couple message-hidden">
                                    <span class="answer-tag ${tagClass}">${msg.name}</span>
                                    <p>${msg.text.replace(/\n/g, '<br>')}</p>
                                </div>
                            </div>
                        `;
                        break;

                    case 'info':
                        div.className = 'px-4 py-3';
                        div.innerHTML = `
                            <div class="info-card message-hidden">
                                <div class="text-center">
                                    <p class="text-2xl mb-3">ğŸ“…</p>
                                    <p class="font-bold text-lg text-gray-800">${msg.data.date}</p>
                                    <p class="text-gray-600">${msg.data.day} ${msg.data.time}</p>
                                    <div class="border-t border-gray-200 my-4"></div>
                                    <p class="text-2xl mb-3">ğŸ“</p>
                                    <p class="font-bold text-gray-800">${msg.data.venue}</p>
                                    <p class="text-sm text-gray-500">${msg.data.address}</p>
                                    <a href="#" class="inline-block mt-4 px-6 py-2 bg-kakao-yellow text-kakao-brown rounded-full text-sm font-medium">
                                        ì§€ë„ ë³´ê¸°
                                    </a>
                                </div>
                            </div>
                        `;
                        break;

                    case 'image':
                        div.className = 'px-4 py-3 flex justify-center';
                        div.innerHTML = `
                            <div class="bubble-image message-hidden">
                                <img src="${msg.src}" class="${msg.large ? 'w-72 h-72' : 'w-56 h-56'} object-cover" alt="${msg.alt}">
                            </div>
                        `;
                        break;
                }

                return div;
            }

            scrollToBottom() {
                setTimeout(() => {
                    window.scrollTo({
                        top: document.documentElement.scrollHeight,
                        behavior: 'smooth'
                    });
                }, 50);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new ChatController();
        });
    </script>
</body>
</html>
